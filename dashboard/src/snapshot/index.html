<!DOCTYPE html>
<html ng-app="kuona.snapshot">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Page title set in pageTitle directive -->
    <title>Kuona | Snapshot</title>

    <!-- Font awesome -->
    <link href="/font-awesome/css/font-awesome.css" rel="stylesheet">

    <!-- Bootstrap and Fonts -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <!-- Main Inspinia CSS files -->
    <link href="/css/animate.css" rel="stylesheet">
    <link id="loadBefore" href="/css/style.css" rel="stylesheet">
    <base href="/snapshot/index.html">
</head>

<!-- ControllerAs syntax -->
<!-- Main controller with serveral data used in Inspinia theme on diferent view -->
<body ng-controller="SnapshotController as controller" class="top-navigation pace-done">
  <div class="wrapper">
    <div id="page-wrapper">
      <div ng-include="'/views/common/navigation.html'"></div>
      
      <div class="row wrapper border-bottom page-heading">
        <div class="col-lg-12 owner">
          <table>
            <tr>
              <td>
                <img alt="image" class="img-circle" ng-src="{{ avatar_url }}">
              </td>
              <td>&nbsp;</td>
              <td>
                <h2>{{snapshot.repository.name}} Snapshot</h2>
                <small>{{snapshot.repository.description}}</small>
                <a href="{{repository.project.html_url}}"> {{repository.project.html_url}} <i class="fa fa-github"></i></a>
              </td>
            </tr>
          </table>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-12">
          <p>&nbsp;</p>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-2">
          <div class="ibox">
            <div class="ibox-title">
              <h5><i class="fa fa-github"></i> Project data
                <small>last updated {{snapshot.repository.updated_at  | date:'yyyy-MM-dd'}}.</small>
              </h5>
            </div>
            <div class="ibox-content">
              <div class="row">
                <div class="col-sm-6"><i class="fa fa-bug" aria-hidden="true"></i>&nbsp;Open&nbsp;Issues</div>
                <div class="col-sm-6 text-navy">{{snapshot.repository.open_issues_count}}</div>
              </div>
              <div class="row">
                <div class="col-sm-6"><i class="fa fa-code-fork" aria-hidden="true"></i> Forks</div>
                <div class="col-sm-6 text-navy">{{snapshot.repository.forks_count}}</div>
              </div>
              <div class="row">
                <div class="col-sm-6"><i class="fa fa-eye" aria-hidden="true"></i> Watchers</div>
                <div class="col-sm-6 text-navy">{{snapshot.repository.watchers_count}}</div>
              </div>
              <div class="row">
                <div class="col-sm-6"><i class="fa fa-star" aria-hidden="true"></i> Stars</div>
                <div class="col-sm-6 text-navy">{{snapshot.repository.stargazers_count | number}}</div>
              </div>
              <div class="row">
                <div class="col-sm-6"><i class="fa fa-circle-o" aria-hidden="true"></i>Size (kb)</div>
                <div class="col-sm-6 text-navy">{{snapshot.repository.size | number}}</div>
              </div>
              <div class="row">
                <div class="col-sm-6"><i class="fa fa-clock-o" aria-hidden="true"></i> Updated</div>
                <div class="col-sm-6 text-navy">{{snapshot.repository.updated_at  | date:'yyyy-MM-dd'}}</div>
              </div>
              <div class="row">
                <div class="col-sm-6"><i class="fa fa-clock-o" aria-hidden="true"></i> Pushed at</div>
                <div class="col-sm-6 text-navy">{{snapshot.repository.pushed_at | date:'yyyy-MM-dd' }}</div>
              </div>
              <div class="row">
                <div class="col-sm-6"><i class="fa fa-circle-o" aria-hidden="true"></i> Language</div>
                <div class="col-sm-6 text-navy">{{snapshot.repository.language}}</div>
              </div>
              <hr/>
              <div class="row">
                <div class="col-sm-6"><i class="fa fa-file-o"></i> Files</div>
                <div class="col-sm-6 text-navy">{{snapshot.content.file_count}}</div>
              </div>
              <div class="row">
                <div class="col-sm-6"><i class="fa fa-comments-o" aria-hidden="true"></i> Lines of comments</div>
                <div class="col-sm-6 text-navy">{{snapshot.content.comment_lines | number}}</div>
                </div>
              <div class="row">
                <div class="col-sm-6"><i class="fa fa-circle-o" aria-hidden="true"></i> Blank lines</div>
                <div class="col-sm-6 text-navy">{{snapshot.content.blank_lines | number}}</div>
              </div>
              <div class="row">
                <div class="col-sm-6"><i class="fa fa-code" aria-hidden="true"></i> Lines of Code</div>
                <div class="col-sm-6 text-navy">{{snapshot.content.code_lines | number}}</div>
              </div>
              <hr/>
              
              <div class="row">
                <div class="col-sm-6"><i class="fa fa-cog"></i> Build Modules</div>
                <div class="col-sm-6 text-navy">{{snapshot.build.length | number}}</div>
              </div>
              
            </div>
          </div>
        </div>
        
        <div class="col-lg-5">
          <div class="ibox">
            <div class="ibox-title">
              <h5><i class="fa fa-file"></i> File Counts</h5>
            </div>
            <div class="ibox-content">
              <canvas id="filesBarCanvas"></canvas>
            </div>
          </div>
        </div>
        <div class="col-lg-5">
          <div class="ibox">
            <div class="ibox-title">
              <h5><i class="fa fa-file"></i> Lines of code</h5>
            </div>
            <div class="ibox-content">
              <canvas id="codeBarCanvas"></canvas>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row">
        <div ng-repeat="build in snapshot.build | orderBy: 'artifact.name'" class="col-lg-4">
          <div class="ibox">
            <div class="ibox-title">
              <span ng-if="build.artifact.packaging" class="label label-success pull-right ng-binding">{{build.artifact.packaging}}</span>
              <h5>{{ build.artifact.name }} <small ng-if="build.artifact.inceptionYear">{{ build.artifact.inceptionYear }}</small></h5>
            </div>
            <div class="ibox-content">
              <h5><i class="fa fa-file"></i> <code>{{ build.path }}</code></h5>
              <div ng-if="build.artifact">
                <small><code>{{ build.artifact.groupId || '[groupId]'}}:{{ build.artifact.artifactId || '[artifactId]'}}:{{ build.artifact.version || '[version]'}}</code></small>
              </div>
              <div ng-if="build.artifact">
                <h5>{{ build.artifact.name }} <small ng-if="build.artifact.inceptionYear">{{ build.artifact.inceptionYear }}</small></h5>
                <p ng-if="build.artifact.description"> {{ build.artifact.description || '' }} <a ng-if="build.artifact.url" href="{{build.artifact.url}}">{{build.artifact.url}}</a></p>
              </div>
              <div ng-if="build.dependencyTree">
                <dependency-chart data='build.dependencyTree'></dependency-chart>
              </div>
              <div ng-if="!build.dependencyTree">
                <small>Dependency data gathering is still under development. Maven modules (pom.xml files) is supported.</small>
              </div>

            </div>
          </div>
        </div>
      </div>
      
      <div ng-include="'/views/common/footer.html'"></div>

    </div>
  </div>

  <!-- jQuery and Bootstrap -->
  <script src="/js/jquery/jquery-2.1.1.min.js"></script>
  <script src="/js/plugins/jquery-ui/jquery-ui.js"></script>
  <script src="/js/bootstrap/bootstrap.min.js"></script>

  <!-- MetsiMenu -->
  <script src="/js/plugins/metisMenu/jquery.metisMenu.js"></script>

  <!-- SlimScroll -->
  <script src="/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

  <!-- Custom and plugin javascript -->
  <script src="/js/inspinia.js"></script>

  <!-- Main Angular scripts-->
  <script src="/js/angular/angular.js"></script>
  <script src="/js/angular/angular-websocket.js"></script>
  <script src="/js/plugins/oclazyload/dist/ocLazyLoad.min.js"></script>
  <script src="/js/ui-router/angular-ui-router.min.js"></script>
  <script src="/js/bootstrap/ui-bootstrap-tpls-1.1.2.min.js"></script>
  <script src="/js/angular/angular-resource.min.js"></script>

  <script src="/js/d3.js"></script>
  <script src="/js/d3pie.min.js"></script>
  <script src="/js/plugins/chartjs/Chart.min.js"></script>

  <script src="/js/charts.js"></script>
  <script src="/js/snapshot.js"></script>
</body>
</html>
